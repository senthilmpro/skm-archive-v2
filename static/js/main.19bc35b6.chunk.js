(this["webpackJsonpskm-archive-v2"]=this["webpackJsonpskm-archive-v2"]||[]).push([[0],{18:function(e,t,n){e.exports=n(45)},23:function(e,t,n){},24:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),l=(n(23),n(24),n(2)),o=n.n(l),u=n(4),s=n(3),f=n(5),p=n(6),m=n(7),h=n.n(m),d=function(){function e(){Object(f.a)(this,e)}return Object(p.a)(e,null,[{key:"fetchWordpress",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dumppro.wordpress.com",10,t="https://public-api.wordpress.com/rest/v1.1/sites/".concat("dumppro.wordpress.com","/posts?number=").concat(10,"&fields=title"),e.next=5,h.a.get(t).then((function(e){return e.data}));case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchArchiveUrl",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){var t=a.getArchiveUrlLink(e.title);return h.a.get(t)})),e.abrupt("return",h.a.all(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArchiveUrlLink",value:function(e){return e.replace("/details/","/metadata/").replace("/download/","/metadata/")}}]),e}(),v=function(){function e(){Object(f.a)(this,e)}return Object(p.a)(e,null,[{key:"getFilesDirectories",value:function(e){}},{key:"getFileUrl",value:function(e){if(!e)return[];var t=["Metadata","Archive BitTorrent","BitTorrent","Thumbnail","BitTorrentContents","Text"];if(e.is_dark)return[];var n=e.server,a=e.dir,r=e.files,c=[];return r&&r.length>0&&(c=(c=r.filter((function(e){return-1===t.indexOf(e.format)})).filter((function(e){return"original"===e.source}))).map((function(e){return"https://".concat(n).concat(a,"/").concat(e.name)}))),c}},{key:"getDownloadUrl",value:function(e){var t=e.metadata&&e.metadata.identifier;return"https://archive.org/download/".concat(t)}}]),e}();n(43);function b(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],l=e.files,o=e.title,u=e.showLinks,f=e.url,p=e.showDL,m=o.split("/").pop(),h=u?l.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("a",{href:e},e))})):l.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("a",{href:e},e.split("/").pop()))}));return r.a.createElement("div",{className:"post_container"},r.a.createElement("div",{style:{width:"100%"},className:"entry_container"},r.a.createElement("h3",null,m),r.a.createElement("button",{className:"btn btn-info dl-button",onClick:function(){return function(e){window.open(e,"_blank")}(f)},style:{display:p?"block":"none"}},"DL"),r.a.createElement("button",{onClick:function(){return i((function(e){return!e}))},style:{marginLeft:"10px",display:l.length>0?"block":"none"},className:["btn","btn-primary","link-button"].join(" ")},"Show Links")),r.a.createElement("span",{className:"files-count"},r.a.createElement("span",null,"File count ")," : ",r.a.createElement("b",null,l.length)),r.a.createElement("div",{style:{display:c?"block":"none"}},r.a.createElement("ul",{className:"links_list"},h)))}n(44);function k(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),l=Object(s.a)(i,2),f=l[0],p=l[1],m=Object(a.useState)(!1),h=Object(s.a)(m,2),k=h[0],E=h[1],w=Object(a.useState)(!0),g=Object(s.a)(w,2),y=g[0],j=g[1],O=Object(a.useState)(!1),x=Object(s.a)(O,2),L=x[0],D=x[1],N=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,d.fetchWordpress();case 3:return t=e.sent,e.next=6,d.fetchArchiveUrl(t.posts);case 6:return n=e.sent,console.log("archiveResponse ",n),a=n.map((function(e){return e.data})),console.log("Archive Data : ",a),r=[],a.forEach((function(e,n){var a={title:t.posts[n].title,files:v.getFileUrl(e),isDark:!!e.is_dark,url:v.getDownloadUrl(e)};a.isDark||r.push(a),console.log(a)})),r.length>0&&(E(!0),p(r)),c(!1),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=f.map((function(e){return r.a.createElement("li",null,r.a.createElement(b,{files:e.files,title:e.title,showLinks:y,url:e.url,showDL:L}))}));return Object(a.useEffect)((function(){N()}),[]),r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",null,"Loading..."),!n&&r.a.createElement(r.a.Fragment,null,!k&&r.a.createElement("div",{className:"container"},"No posts found"),k&&r.a.createElement("div",null,r.a.createElement("h2",null,"Archive Link Checker v2"),r.a.createElement("label",null,"Show Links : ")," ",r.a.createElement("input",{type:"checkbox",onChange:function(){return j((function(e){return!e}))},checked:y}),r.a.createElement("label",null,"Show DL : ")," ",r.a.createElement("input",{type:"checkbox",onChange:function(){return D((function(e){return!e}))},checked:L}),r.a.createElement("div",{style:{width:"95%",paddingTop:"45px"}},r.a.createElement("ul",{className:"list_box"},S)))))}var E=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.19bc35b6.chunk.js.map